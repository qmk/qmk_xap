use std::collections::HashMap;

use serde::{Deserialize, Serialize};
use specta::Type;

use crate::aggregation::Point2D;

#[derive(Clone, Debug, Serialize, Deserialize, Type)]
pub struct Config {
    pub layouts: HashMap<String, Layout>,
    pub matrix_size: Point2D,
}

#[derive(Debug, Clone, Serialize, Deserialize, Type)]
pub struct Layout {
    #[serde(skip)]
    pub name: String,
    pub layout: Vec<LayoutEntry>,
}

impl Layout {
    pub fn find(&self, position: Point2D) -> Option<&LayoutEntry> {
        self.layout.iter().find(|entry| entry.matrix == position)
    }
}

#[derive(Debug, Default, Clone, Serialize, Deserialize, Type)]
pub struct LayoutEntry {
    pub matrix: Point2D,
    pub x: f64,
    pub y: f64,
    #[serde(default = "default_wh")]
    pub w: f64,
    #[serde(default = "default_wh")]
    pub h: f64,
    #[serde(default)]
    pub r: f64,
    #[serde(default)]
    pub rx: f64,
    #[serde(default)]
    pub ry: f64,
}

fn default_wh() -> f64 {
    1.0
}

#[cfg(test)]
mod test {
    use crate::aggregation::config::Config;

    #[test]
    fn deserialize() {
        let input = r#"{
"layouts" : {
    "LAYOUT_75": {
        "layout": [
            {"matrix": [5, 2], "x": 0, "y": 0},
            {"matrix": [5, 3], "x": 1.25, "y": 0},
            {"matrix": [5, 4], "x": 2.25, "y": 0},
            {"matrix": [5, 5], "x": 3.25, "y": 0},
            {"matrix": [5, 6], "x": 4.25, "y": 0},
            {"matrix": [5, 7], "x": 5.5, "y": 0},
            {"matrix": [5, 8], "x": 6.5, "y": 0},

            {"matrix": [11, 1], "x": 8.5, "y": 0},
            {"matrix": [11, 2], "x": 9.5, "y": 0},
            {"matrix": [11, 3], "x": 10.75, "y": 0},
            {"matrix": [11, 4], "x": 11.75, "y": 0},
            {"matrix": [11, 5], "x": 12.75, "y": 0},
            {"matrix": [11, 6], "x": 13.75, "y": 0},
            {"matrix": [11, 7], "x": 15, "y": 0},

            {"matrix": [0, 2], "x": 0, "y": 1.25},
            {"matrix": [0, 3], "x": 1, "y": 1.25},
            {"matrix": [0, 4], "x": 2, "y": 1.25},
            {"matrix": [0, 5], "x": 3, "y": 1.25},
            {"matrix": [0, 6], "x": 4, "y": 1.25},
            {"matrix": [0, 7], "x": 5, "y": 1.25},
            {"matrix": [0, 8], "x": 6, "y": 1.25},

            {"matrix": [6, 0], "x": 8, "y": 1.25},
            {"matrix": [6, 1], "x": 9, "y": 1.25},
            {"matrix": [6, 2], "x": 10, "y": 1.25},
            {"matrix": [6, 3], "x": 11, "y": 1.25},
            {"matrix": [6, 4], "x": 12, "y": 1.25},
            {"matrix": [6, 5], "x": 13, "y": 1.25},
            {"matrix": [6, 6], "x": 14, "y": 1.25},
            {"matrix": [6, 7], "x": 15, "y": 1.25},

            {"matrix": [1, 2], "x": 0, "y": 2.25, "w": 1.5},
            {"matrix": [1, 3], "x": 1.5, "y": 2.25},
            {"matrix": [1, 4], "x": 2.5, "y": 2.25},
            {"matrix": [1, 5], "x": 3.5, "y": 2.25},
            {"matrix": [1, 6], "x": 4.5, "y": 2.25},
            {"matrix": [1, 7], "x": 5.5, "y": 2.25},

            {"matrix": [7, 0], "x": 7.5, "y": 2.25},
            {"matrix": [7, 1], "x": 8.5, "y": 2.25},
            {"matrix": [7, 2], "x": 9.5, "y": 2.25},
            {"matrix": [7, 3], "x": 10.5, "y": 2.25},
            {"matrix": [7, 4], "x": 11.5, "y": 2.25},
            {"matrix": [7, 5], "x": 12.5, "y": 2.25},
            {"matrix": [7, 6], "x": 13.5, "y": 2.25},
            {"matrix": [7, 7], "x": 14.5, "y": 2.25, "w": 1.5},

            {"matrix": [2, 2], "x": 0, "y": 3.25, "w": 1.75},
            {"matrix": [2, 3], "x": 1.75, "y": 3.25},
            {"matrix": [2, 4], "x": 2.75, "y": 3.25},
            {"matrix": [2, 5], "x": 3.75, "y": 3.25},
            {"matrix": [2, 6], "x": 4.75, "y": 3.25},
            {"matrix": [2, 7], "x": 5.75, "y": 3.25},

            {"matrix": [8, 0], "x": 7.75, "y": 3.25},
            {"matrix": [8, 1], "x": 8.75, "y": 3.25},
            {"matrix": [8, 2], "x": 9.75, "y": 3.25},
            {"matrix": [8, 3], "x": 10.75, "y": 3.25},
            {"matrix": [8, 4], "x": 11.75, "y": 3.25},
            {"matrix": [8, 5], "x": 12.75, "y": 3.25},
            {"matrix": [8, 7], "x": 13.75, "y": 3.25, "w": 2.25},

            {"matrix": [3, 2], "x": 0, "y": 4.25, "w": 2.25},
            {"matrix": [3, 4], "x": 2.25, "y": 4.25},
            {"matrix": [3, 5], "x": 3.25, "y": 4.25},
            {"matrix": [3, 6], "x": 4.25, "y": 4.25},
            {"matrix": [3, 7], "x": 5.25, "y": 4.25},
            {"matrix": [3, 8], "x": 6.25, "y": 4.25},

            {"matrix": [9, 0], "x": 8.25, "y": 4.25},
            {"matrix": [9, 1], "x": 9.25, "y": 4.25},
            {"matrix": [9, 2], "x": 10.25, "y": 4.25},
            {"matrix": [9, 3], "x": 11.25, "y": 4.25},
            {"matrix": [9, 4], "x": 12.25, "y": 4.25},
            {"matrix": [9, 6], "x": 13.25, "y": 4.25, "w": 1.75},
            {"matrix": [9, 7], "x": 15, "y": 4.25},

            {"matrix": [4, 2], "x": 0, "y": 5.25, "w": 1.25},
            {"matrix": [4, 3], "x": 1.25, "y": 5.25, "w": 1.25},
            {"matrix": [4, 4], "x": 2.5, "y": 5.25, "w": 1.25},
            {"matrix": [4, 5], "x": 3.75, "y": 5.25, "w": 1.25},
            {"matrix": [4, 6], "x": 5, "y": 5.25},
            {"matrix": [4, 7], "x": 6, "y": 5.25, "w": 1.25},

            {"matrix": [10, 0], "x": 8.25, "y": 5.25, "w": 1.25},
            {"matrix": [10, 1], "x": 9.5, "y": 5.25, "w": 1.5},
            {"matrix": [10, 2], "x": 11, "y": 5.25},
            {"matrix": [10, 3], "x": 12, "y": 5.25},
            {"matrix": [10, 4], "x": 13, "y": 5.25},
            {"matrix": [10, 6], "x": 14, "y": 5.25},
            {"matrix": [10, 7], "x": 15, "y": 5.25}
        ]
    },
    "LAYOUT_75_iso": {
        "layout": [
            {"matrix": [5, 2], "x": 0, "y": 0},
            {"matrix": [5, 3], "x": 1.25, "y": 0},
            {"matrix": [5, 4], "x": 2.25, "y": 0},
            {"matrix": [5, 5], "x": 3.25, "y": 0},
            {"matrix": [5, 6], "x": 4.25, "y": 0},
            {"matrix": [5, 7], "x": 5.5, "y": 0},
            {"matrix": [5, 8], "x": 6.5, "y": 0},

            {"matrix": [11, 1], "x": 8.5, "y": 0},
            {"matrix": [11, 2], "x": 9.5, "y": 0},
            {"matrix": [11, 3], "x": 10.75, "y": 0},
            {"matrix": [11, 4], "x": 11.75, "y": 0},
            {"matrix": [11, 5], "x": 12.75, "y": 0},
            {"matrix": [11, 6], "x": 13.75, "y": 0},
            {"matrix": [11, 7], "x": 15, "y": 0},

            {"matrix": [0, 2], "x": 0, "y": 1.25},
            {"matrix": [0, 3], "x": 1, "y": 1.25},
            {"matrix": [0, 4], "x": 2, "y": 1.25},
            {"matrix": [0, 5], "x": 3, "y": 1.25},
            {"matrix": [0, 6], "x": 4, "y": 1.25},
            {"matrix": [0, 7], "x": 5, "y": 1.25},
            {"matrix": [0, 8], "x": 6, "y": 1.25},

            {"matrix": [6, 0], "x": 8, "y": 1.25},
            {"matrix": [6, 1], "x": 9, "y": 1.25},
            {"matrix": [6, 2], "x": 10, "y": 1.25},
            {"matrix": [6, 3], "x": 11, "y": 1.25},
            {"matrix": [6, 4], "x": 12, "y": 1.25},
            {"matrix": [6, 5], "x": 13, "y": 1.25},
            {"matrix": [6, 6], "x": 14, "y": 1.25},
            {"matrix": [6, 7], "x": 15, "y": 1.25},

            {"matrix": [1, 2], "x": 0, "y": 2.25, "w": 1.5},
            {"matrix": [1, 3], "x": 1.5, "y": 2.25},
            {"matrix": [1, 4], "x": 2.5, "y": 2.25},
            {"matrix": [1, 5], "x": 3.5, "y": 2.25},
            {"matrix": [1, 6], "x": 4.5, "y": 2.25},
            {"matrix": [1, 7], "x": 5.5, "y": 2.25},

            {"matrix": [7, 0], "x": 7.5, "y": 2.25},
            {"matrix": [7, 1], "x": 8.5, "y": 2.25},
            {"matrix": [7, 2], "x": 9.5, "y": 2.25},
            {"matrix": [7, 3], "x": 10.5, "y": 2.25},
            {"matrix": [7, 4], "x": 11.5, "y": 2.25},
            {"matrix": [7, 5], "x": 12.5, "y": 2.25},
            {"matrix": [7, 6], "x": 13.5, "y": 2.25},

            {"matrix": [2, 2], "x": 0, "y": 3.25, "w": 1.75},
            {"matrix": [2, 3], "x": 1.75, "y": 3.25},
            {"matrix": [2, 4], "x": 2.75, "y": 3.25},
            {"matrix": [2, 5], "x": 3.75, "y": 3.25},
            {"matrix": [2, 6], "x": 4.75, "y": 3.25},
            {"matrix": [2, 7], "x": 5.75, "y": 3.25},

            {"matrix": [8, 0], "x": 7.75, "y": 3.25},
            {"matrix": [8, 1], "x": 8.75, "y": 3.25},
            {"matrix": [8, 2], "x": 9.75, "y": 3.25},
            {"matrix": [8, 3], "x": 10.75, "y": 3.25},
            {"matrix": [8, 4], "x": 11.75, "y": 3.25},
            {"matrix": [8, 5], "x": 12.75, "y": 3.25},
            {"matrix": [8, 6], "x": 13.75, "y": 3.25},
            {"matrix": [7, 7], "x": 14.75, "y": 2.25, "w": 1.25, "h": 2},

            {"matrix": [3, 2], "x": 0, "y": 4.25, "w": 1.25},
            {"matrix": [3, 3], "x": 1.25, "y": 4.25},
            {"matrix": [3, 4], "x": 2.25, "y": 4.25},
            {"matrix": [3, 5], "x": 3.25, "y": 4.25},
            {"matrix": [3, 6], "x": 4.25, "y": 4.25},
            {"matrix": [3, 7], "x": 5.25, "y": 4.25},
            {"matrix": [3, 8], "x": 6.25, "y": 4.25},

            {"matrix": [9, 0], "x": 8.25, "y": 4.25},
            {"matrix": [9, 1], "x": 9.25, "y": 4.25},
            {"matrix": [9, 2], "x": 10.25, "y": 4.25},
            {"matrix": [9, 3], "x": 11.25, "y": 4.25},
            {"matrix": [9, 4], "x": 12.25, "y": 4.25},
            {"matrix": [9, 6], "x": 13.25, "y": 4.25, "w": 1.75},
            {"matrix": [9, 7], "x": 15, "y": 4.25},

            {"matrix": [4, 2], "x": 0, "y": 5.25, "w": 1.25},
            {"matrix": [4, 3], "x": 1.25, "y": 5.25, "w": 1.25},
            {"matrix": [4, 4], "x": 2.5, "y": 5.25, "w": 1.25},
            {"matrix": [4, 5], "x": 3.75, "y": 5.25, "w": 1.25},
            {"matrix": [4, 6], "x": 5, "y": 5.25},
            {"matrix": [4, 7], "x": 6, "y": 5.25, "w": 1.25},

            {"matrix": [10, 0], "x": 8.25, "y": 5.25, "w": 1.25},
            {"matrix": [10, 1], "x": 9.5, "y": 5.25, "w": 1.5},
            {"matrix": [10, 2], "x": 11, "y": 5.25},
            {"matrix": [10, 3], "x": 12, "y": 5.25},
            {"matrix": [10, 4], "x": 13, "y": 5.25},
            {"matrix": [10, 6], "x": 14, "y": 5.25},
            {"matrix": [10, 7], "x": 15, "y": 5.25}
        ]
    },
    "LAYOUT_75_iso_with_macro": {
        "layout": [
            {"matrix": [5, 0], "x": 0, "y": 0},
            {"matrix": [5, 2], "x": 2.25, "y": 0},
            {"matrix": [5, 3], "x": 3.5, "y": 0},
            {"matrix": [5, 4], "x": 4.5, "y": 0},
            {"matrix": [5, 5], "x": 5.5, "y": 0},
            {"matrix": [5, 6], "x": 6.5, "y": 0},
            {"matrix": [5, 7], "x": 7.75, "y": 0},
            {"matrix": [5, 8], "x": 8.75, "y": 0},

            {"matrix": [11, 1], "x": 10.75, "y": 0},
            {"matrix": [11, 2], "x": 11.75, "y": 0},
            {"matrix": [11, 3], "x": 13, "y": 0},
            {"matrix": [11, 4], "x": 14, "y": 0},
            {"matrix": [11, 5], "x": 15, "y": 0},
            {"matrix": [11, 6], "x": 16, "y": 0},
            {"matrix": [11, 7], "x": 17.25, "y": 0},

            {"matrix": [0, 0], "x": 0, "y": 1.25},
            {"matrix": [0, 1], "x": 1, "y": 1.25},
            {"matrix": [0, 2], "x": 2.25, "y": 1.25},
            {"matrix": [0, 3], "x": 3.25, "y": 1.25},
            {"matrix": [0, 4], "x": 4.25, "y": 1.25},
            {"matrix": [0, 5], "x": 5.25, "y": 1.25},
            {"matrix": [0, 6], "x": 6.25, "y": 1.25},
            {"matrix": [0, 7], "x": 7.25, "y": 1.25},
            {"matrix": [0, 8], "x": 8.25, "y": 1.25},

            {"matrix": [6, 0], "x": 10.25, "y": 1.25},
            {"matrix": [6, 1], "x": 11.25, "y": 1.25},
            {"matrix": [6, 2], "x": 12.25, "y": 1.25},
            {"matrix": [6, 3], "x": 13.25, "y": 1.25},
            {"matrix": [6, 4], "x": 14.25, "y": 1.25},
            {"matrix": [6, 5], "x": 15.25, "y": 1.25},
            {"matrix": [6, 6], "x": 16.25, "y": 1.25},
            {"matrix": [6, 7], "x": 17.25, "y": 1.25},

            {"matrix": [1, 0], "x": 0, "y": 2.25},
            {"matrix": [1, 1], "x": 1, "y": 2.25},
            {"matrix": [1, 2], "x": 2.25, "y": 2.25, "w": 1.5},
            {"matrix": [1, 3], "x": 3.75, "y": 2.25},
            {"matrix": [1, 4], "x": 4.75, "y": 2.25},
            {"matrix": [1, 5], "x": 5.75, "y": 2.25},
            {"matrix": [1, 6], "x": 6.75, "y": 2.25},
            {"matrix": [1, 7], "x": 7.75, "y": 2.25},

            {"matrix": [7, 0], "x": 9.75, "y": 2.25},
            {"matrix": [7, 1], "x": 10.75, "y": 2.25},
            {"matrix": [7, 2], "x": 11.75, "y": 2.25},
            {"matrix": [7, 3], "x": 12.75, "y": 2.25},
            {"matrix": [7, 4], "x": 13.75, "y": 2.25},
            {"matrix": [7, 5], "x": 14.75, "y": 2.25},
            {"matrix": [7, 6], "x": 15.75, "y": 2.25},

            {"matrix": [2, 0], "x": 0, "y": 3.25},
            {"matrix": [2, 1], "x": 1, "y": 3.25},
            {"matrix": [2, 2], "x": 2.25, "y": 3.25, "w": 1.75},
            {"matrix": [2, 3], "x": 4, "y": 3.25},
            {"matrix": [2, 4], "x": 5, "y": 3.25},
            {"matrix": [2, 5], "x": 6, "y": 3.25},
            {"matrix": [2, 6], "x": 7, "y": 3.25},
            {"matrix": [2, 7], "x": 8, "y": 3.25},

            {"matrix": [8, 0], "x": 10, "y": 3.25},
            {"matrix": [8, 1], "x": 11, "y": 3.25},
            {"matrix": [8, 2], "x": 12, "y": 3.25},
            {"matrix": [8, 3], "x": 13, "y": 3.25},
            {"matrix": [8, 4], "x": 14, "y": 3.25},
            {"matrix": [8, 5], "x": 15, "y": 3.25},
            {"matrix": [8, 6], "x": 16, "y": 3.25},
            {"matrix": [7, 7], "x": 17, "y": 2.25, "w": 1.25, "h": 2},

            {"matrix": [3, 0], "x": 0, "y": 4.25},
            {"matrix": [3, 1], "x": 1, "y": 4.25},
            {"matrix": [3, 2], "x": 2.25, "y": 4.25, "w": 1.25},
            {"matrix": [3, 3], "x": 3.5, "y": 4.25},
            {"matrix": [3, 4], "x": 4.5, "y": 4.25},
            {"matrix": [3, 5], "x": 5.5, "y": 4.25},
            {"matrix": [3, 6], "x": 6.5, "y": 4.25},
            {"matrix": [3, 7], "x": 7.5, "y": 4.25},
            {"matrix": [3, 8], "x": 8.5, "y": 4.25},

            {"matrix": [9, 0], "x": 10.5, "y": 4.25},
            {"matrix": [9, 1], "x": 11.5, "y": 4.25},
            {"matrix": [9, 2], "x": 12.5, "y": 4.25},
            {"matrix": [9, 3], "x": 13.5, "y": 4.25},
            {"matrix": [9, 4], "x": 14.5, "y": 4.25},
            {"matrix": [9, 6], "x": 15.5, "y": 4.25, "w": 1.75},
            {"matrix": [9, 7], "x": 17.25, "y": 4.25},

            {"matrix": [4, 0], "x": 0, "y": 5.25},
            {"matrix": [4, 1], "x": 1, "y": 5.25},
            {"matrix": [4, 2], "x": 2.25, "y": 5.25, "w": 1.25},
            {"matrix": [4, 3], "x": 3.5, "y": 5.25, "w": 1.25},
            {"matrix": [4, 4], "x": 4.75, "y": 5.25, "w": 1.25},
            {"matrix": [4, 5], "x": 6, "y": 5.25, "w": 1.25},
            {"matrix": [4, 6], "x": 7.25, "y": 5.25},
            {"matrix": [4, 7], "x": 8.25, "y": 5.25, "w": 1.25},

            {"matrix": [10, 0], "x": 10.5, "y": 5.25, "w": 1.25},
            {"matrix": [10, 1], "x": 11.75, "y": 5.25, "w": 1.5},
            {"matrix": [10, 2], "x": 13.25, "y": 5.25},
            {"matrix": [10, 3], "x": 14.25, "y": 5.25},
            {"matrix": [10, 4], "x": 15.25, "y": 5.25},
            {"matrix": [10, 6], "x": 16.25, "y": 5.25},
            {"matrix": [10, 7], "x": 17.25, "y": 5.25}
        ]
    },
    "LAYOUT_75_with_macro": {
        "layout": [
            {"matrix": [5, 0], "x": 0, "y": 0},
            {"matrix": [5, 2], "x": 2.25, "y": 0},
            {"matrix": [5, 3], "x": 3.5, "y": 0},
            {"matrix": [5, 4], "x": 4.5, "y": 0},
            {"matrix": [5, 5], "x": 5.5, "y": 0},
            {"matrix": [5, 6], "x": 6.5, "y": 0},
            {"matrix": [5, 7], "x": 7.75, "y": 0},
            {"matrix": [5, 8], "x": 8.75, "y": 0},

            {"matrix": [11, 1], "x": 10.75, "y": 0},
            {"matrix": [11, 2], "x": 11.75, "y": 0},
            {"matrix": [11, 3], "x": 13, "y": 0},
            {"matrix": [11, 4], "x": 14, "y": 0},
            {"matrix": [11, 5], "x": 15, "y": 0},
            {"matrix": [11, 6], "x": 16, "y": 0},
            {"matrix": [11, 7], "x": 17.25, "y": 0},

            {"matrix": [0, 0], "x": 0, "y": 1.25},
            {"matrix": [0, 1], "x": 1, "y": 1.25},
            {"matrix": [0, 2], "x": 2.25, "y": 1.25},
            {"matrix": [0, 3], "x": 3.25, "y": 1.25},
            {"matrix": [0, 4], "x": 4.25, "y": 1.25},
            {"matrix": [0, 5], "x": 5.25, "y": 1.25},
            {"matrix": [0, 6], "x": 6.25, "y": 1.25},
            {"matrix": [0, 7], "x": 7.25, "y": 1.25},
            {"matrix": [0, 8], "x": 8.25, "y": 1.25},

            {"matrix": [6, 0], "x": 10.25, "y": 1.25},
            {"matrix": [6, 1], "x": 11.25, "y": 1.25},
            {"matrix": [6, 2], "x": 12.25, "y": 1.25},
            {"matrix": [6, 3], "x": 13.25, "y": 1.25},
            {"matrix": [6, 4], "x": 14.25, "y": 1.25},
            {"matrix": [6, 5], "x": 15.25, "y": 1.25},
            {"matrix": [6, 6], "x": 16.25, "y": 1.25},
            {"matrix": [6, 7], "x": 17.25, "y": 1.25},

            {"matrix": [1, 0], "x": 0, "y": 2.25},
            {"matrix": [1, 1], "x": 1, "y": 2.25},
            {"matrix": [1, 2], "x": 2.25, "y": 2.25, "w": 1.5},
            {"matrix": [1, 3], "x": 3.75, "y": 2.25},
            {"matrix": [1, 4], "x": 4.75, "y": 2.25},
            {"matrix": [1, 5], "x": 5.75, "y": 2.25},
            {"matrix": [1, 6], "x": 6.75, "y": 2.25},
            {"matrix": [1, 7], "x": 7.75, "y": 2.25},

            {"matrix": [7, 0], "x": 9.75, "y": 2.25},
            {"matrix": [7, 1], "x": 10.75, "y": 2.25},
            {"matrix": [7, 2], "x": 11.75, "y": 2.25},
            {"matrix": [7, 3], "x": 12.75, "y": 2.25},
            {"matrix": [7, 4], "x": 13.75, "y": 2.25},
            {"matrix": [7, 5], "x": 14.75, "y": 2.25},
            {"matrix": [7, 6], "x": 15.75, "y": 2.25},
            {"matrix": [7, 7], "x": 16.75, "y": 2.25, "w": 1.5},

            {"matrix": [2, 0], "x": 0, "y": 3.25},
            {"matrix": [2, 1], "x": 1, "y": 3.25},
            {"matrix": [2, 2], "x": 2.25, "y": 3.25, "w": 1.75},
            {"matrix": [2, 3], "x": 4, "y": 3.25},
            {"matrix": [2, 4], "x": 5, "y": 3.25},
            {"matrix": [2, 5], "x": 6, "y": 3.25},
            {"matrix": [2, 6], "x": 7, "y": 3.25},
            {"matrix": [2, 7], "x": 8, "y": 3.25},

            {"matrix": [8, 0], "x": 10, "y": 3.25},
            {"matrix": [8, 1], "x": 11, "y": 3.25},
            {"matrix": [8, 2], "x": 12, "y": 3.25},
            {"matrix": [8, 3], "x": 13, "y": 3.25},
            {"matrix": [8, 4], "x": 14, "y": 3.25},
            {"matrix": [8, 5], "x": 15, "y": 3.25},
            {"matrix": [8, 7], "x": 16, "y": 3.25, "w": 2.25},

            {"matrix": [3, 0], "x": 0, "y": 4.25},
            {"matrix": [3, 1], "x": 1, "y": 4.25},
            {"matrix": [3, 2], "x": 2.25, "y": 4.25, "w": 2.25},
            {"matrix": [3, 4], "x": 4.5, "y": 4.25},
            {"matrix": [3, 5], "x": 5.5, "y": 4.25},
            {"matrix": [3, 6], "x": 6.5, "y": 4.25},
            {"matrix": [3, 7], "x": 7.5, "y": 4.25},
            {"matrix": [3, 8], "x": 8.5, "y": 4.25},

            {"matrix": [9, 0], "x": 10.5, "y": 4.25},
            {"matrix": [9, 1], "x": 11.5, "y": 4.25},
            {"matrix": [9, 2], "x": 12.5, "y": 4.25},
            {"matrix": [9, 3], "x": 13.5, "y": 4.25},
            {"matrix": [9, 4], "x": 14.5, "y": 4.25},
            {"matrix": [9, 6], "x": 15.5, "y": 4.25, "w": 1.75},
            {"matrix": [9, 7], "x": 17.25, "y": 4.25},

            {"matrix": [4, 0], "x": 0, "y": 5.25},
            {"matrix": [4, 1], "x": 1, "y": 5.25},
            {"matrix": [4, 2], "x": 2.25, "y": 5.25, "w": 1.25},
            {"matrix": [4, 3], "x": 3.5, "y": 5.25, "w": 1.25},
            {"matrix": [4, 4], "x": 4.75, "y": 5.25, "w": 1.25},
            {"matrix": [4, 5], "x": 6, "y": 5.25, "w": 1.25},
            {"matrix": [4, 6], "x": 7.25, "y": 5.25},
            {"matrix": [4, 7], "x": 8.25, "y": 5.25, "w": 1.25},

            {"matrix": [10, 0], "x": 10.5, "y": 5.25, "w": 1.25},
            {"matrix": [10, 1], "x": 11.75, "y": 5.25, "w": 1.5},
            {"matrix": [10, 2], "x": 13.25, "y": 5.25},
            {"matrix": [10, 3], "x": 14.25, "y": 5.25},
            {"matrix": [10, 4], "x": 15.25, "y": 5.25},
            {"matrix": [10, 6], "x": 16.25, "y": 5.25},
            {"matrix": [10, 7], "x": 17.25, "y": 5.25}
        ]
    },
    "LAYOUT_all": {
        "layout": [
            {"matrix": [5, 0], "x": 0, "y": 0},
            {"matrix": [5, 2], "x": 2.25, "y": 0},
            {"matrix": [5, 3], "x": 3.5, "y": 0},
            {"matrix": [5, 4], "x": 4.5, "y": 0},
            {"matrix": [5, 5], "x": 5.5, "y": 0},
            {"matrix": [5, 6], "x": 6.5, "y": 0},
            {"matrix": [5, 7], "x": 7.75, "y": 0},
            {"matrix": [5, 8], "x": 8.75, "y": 0},

            {"matrix": [11, 1], "x": 10.75, "y": 0},
            {"matrix": [11, 2], "x": 11.75, "y": 0},
            {"matrix": [11, 3], "x": 13, "y": 0},
            {"matrix": [11, 4], "x": 14, "y": 0},
            {"matrix": [11, 5], "x": 15, "y": 0},
            {"matrix": [11, 6], "x": 16, "y": 0},
            {"matrix": [11, 7], "x": 17.25, "y": 0},
            {"matrix": [11, 8], "x": 18.25, "y": 0},

            {"matrix": [0, 0], "x": 0, "y": 1.25},
            {"matrix": [0, 1], "x": 1, "y": 1.25},
            {"matrix": [0, 2], "x": 2.25, "y": 1.25},
            {"matrix": [0, 3], "x": 3.25, "y": 1.25},
            {"matrix": [0, 4], "x": 4.25, "y": 1.25},
            {"matrix": [0, 5], "x": 5.25, "y": 1.25},
            {"matrix": [0, 6], "x": 6.25, "y": 1.25},
            {"matrix": [0, 7], "x": 7.25, "y": 1.25},
            {"matrix": [0, 8], "x": 8.25, "y": 1.25},

            {"matrix": [6, 0], "x": 10.25, "y": 1.25},
            {"matrix": [6, 1], "x": 11.25, "y": 1.25},
            {"matrix": [6, 2], "x": 12.25, "y": 1.25},
            {"matrix": [6, 3], "x": 13.25, "y": 1.25},
            {"matrix": [6, 4], "x": 14.25, "y": 1.25},
            {"matrix": [6, 5], "x": 15.25, "y": 1.25},
            {"matrix": [6, 6], "x": 16.25, "y": 1.25},
            {"matrix": [6, 7], "x": 17.25, "y": 1.25},
            {"matrix": [6, 8], "x": 18.25, "y": 1.25},

            {"matrix": [1, 0], "x": 0, "y": 2.25},
            {"matrix": [1, 1], "x": 1, "y": 2.25},
            {"matrix": [1, 2], "x": 2.25, "y": 2.25, "w": 1.5},
            {"matrix": [1, 3], "x": 3.75, "y": 2.25},
            {"matrix": [1, 4], "x": 4.75, "y": 2.25},
            {"matrix": [1, 5], "x": 5.75, "y": 2.25},
            {"matrix": [1, 6], "x": 6.75, "y": 2.25},
            {"matrix": [1, 7], "x": 7.75, "y": 2.25},

            {"matrix": [7, 0], "x": 9.75, "y": 2.25},
            {"matrix": [7, 1], "x": 10.75, "y": 2.25},
            {"matrix": [7, 2], "x": 11.75, "y": 2.25},
            {"matrix": [7, 3], "x": 12.75, "y": 2.25},
            {"matrix": [7, 4], "x": 13.75, "y": 2.25},
            {"matrix": [7, 5], "x": 14.75, "y": 2.25},
            {"matrix": [7, 6], "x": 15.75, "y": 2.25},
            {"matrix": [7, 7], "x": 16.75, "y": 2.25, "w": 1.5},
            {"matrix": [7, 8], "x": 18.25, "y": 2.25},

            {"matrix": [2, 0], "x": 0, "y": 3.25},
            {"matrix": [2, 1], "x": 1, "y": 3.25},
            {"matrix": [2, 2], "x": 2.25, "y": 3.25, "w": 1.75},
            {"matrix": [2, 3], "x": 4, "y": 3.25},
            {"matrix": [2, 4], "x": 5, "y": 3.25},
            {"matrix": [2, 5], "x": 6, "y": 3.25},
            {"matrix": [2, 6], "x": 7, "y": 3.25},
            {"matrix": [2, 7], "x": 8, "y": 3.25},

            {"matrix": [8, 0], "x": 10, "y": 3.25},
            {"matrix": [8, 1], "x": 11, "y": 3.25},
            {"matrix": [8, 2], "x": 12, "y": 3.25},
            {"matrix": [8, 3], "x": 13, "y": 3.25},
            {"matrix": [8, 4], "x": 14, "y": 3.25},
            {"matrix": [8, 5], "x": 15, "y": 3.25},
            {"matrix": [8, 6], "x": 16, "y": 3.25},
            {"matrix": [8, 7], "x": 17, "y": 3.25, "w": 1.25},
            {"matrix": [8, 8], "x": 18.25, "y": 3.25},

            {"matrix": [3, 0], "x": 0, "y": 4.25},
            {"matrix": [3, 1], "x": 1, "y": 4.25},
            {"matrix": [3, 2], "x": 2.25, "y": 4.25, "w": 1.25},
            {"matrix": [3, 3], "x": 3.5, "y": 4.25},
            {"matrix": [3, 4], "x": 4.5, "y": 4.25},
            {"matrix": [3, 5], "x": 5.5, "y": 4.25},
            {"matrix": [3, 6], "x": 6.5, "y": 4.25},
            {"matrix": [3, 7], "x": 7.5, "y": 4.25},
            {"matrix": [3, 8], "x": 8.5, "y": 4.25},

            {"matrix": [9, 0], "x": 10.5, "y": 4.25},
            {"matrix": [9, 1], "x": 11.5, "y": 4.25},
            {"matrix": [9, 2], "x": 12.5, "y": 4.25},
            {"matrix": [9, 3], "x": 13.5, "y": 4.25},
            {"matrix": [9, 4], "x": 14.5, "y": 4.25},
            {"matrix": [9, 6], "x": 15.5, "y": 4.25, "w": 1.75},
            {"matrix": [9, 7], "x": 17.25, "y": 4.25},
            {"matrix": [9, 8], "x": 18.25, "y": 4.25},

            {"matrix": [4, 0], "x": 0, "y": 5.25},
            {"matrix": [4, 1], "x": 1, "y": 5.25},
            {"matrix": [4, 2], "x": 2.25, "y": 5.25, "w": 1.25},
            {"matrix": [4, 3], "x": 3.5, "y": 5.25, "w": 1.25},
            {"matrix": [4, 4], "x": 4.75, "y": 5.25, "w": 1.25},
            {"matrix": [4, 5], "x": 6, "y": 5.25, "w": 1.25},
            {"matrix": [4, 6], "x": 7.25, "y": 5.25},
            {"matrix": [4, 7], "x": 8.25, "y": 5.25, "w": 1.25},

            {"matrix": [10, 0], "x": 10.5, "y": 5.25, "w": 1.25},
            {"matrix": [10, 1], "x": 11.75, "y": 5.25, "w": 1.5},
            {"matrix": [10, 2], "x": 13.25, "y": 5.25},
            {"matrix": [10, 3], "x": 14.25, "y": 5.25},
            {"matrix": [10, 4], "x": 15.25, "y": 5.25},
            {"matrix": [10, 6], "x": 16.25, "y": 5.25},
            {"matrix": [10, 7], "x": 17.25, "y": 5.25},
            {"matrix": [10, 8], "x": 18.25, "y": 5.25}
        ]
    }
},
"matrix_size": {
    "cols": 9,
    "rows": 12
}
}"#;

        let _layout: Config = serde_json::from_str(input).unwrap();
    }
}
